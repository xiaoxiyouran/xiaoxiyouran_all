# 数据库索引

```mysql
1- 索引是将数据库表中的某一列或几列以特定的数据结构存起来，比如B-Tree，Hash等. 查找 O(1)
2- 索引是用来定位的
3- 建立索引之后查找和修改，排序等操作可以省很多时间。

4- 分类
	聚簇索引: 是按照数据存放的物理位置为顺序的，就像书中的目录 【提高了多行检索的速度】
	非聚簇索引： 单行的检索速度很快
	
5- 根据索引的功能分类
	唯一索引：唯一索引是不允许其中任何两行具有相同索引值的索引。不是只能建一个索引。
	提示：尽管唯一索引有助于定位信息，但为获得最佳性能结果，建议改用主键或唯一约束。
	
	主键索引：经常有一列或多列组合，其值唯一标识表中的每一行。该列称为表的主键。在数据库关系图中为表定义主键将自动创建主键索引，主键索引是唯一索引的特定类型

	聚集索引：行的物理顺序与键值的逻辑（索引）顺序相同。一个表只能包含一个聚集索引。如果某索引不是聚集索引，则表中行的物理顺序与键值的逻辑顺序不匹配。与非聚集索引相比，聚集索引通常提供更快的数据访问速度。
	
	多列索引： 基于数据库表中的单列或多列创建索引。多列索引可以区分其中一列可能有相同值的行。
	
	搜索两列或多列或按两列或多列排序时，索引也很有帮助。例如，如果经常在同一查询中为姓和名两列设置判据，那么在这两列上创建多列索引将很有意义。
```



### 建立数据库索引的作用

- 数据库**索引是将数据库表中的某一列或几列以特定的数据结构存起来，比如B-Tree，Hash等**，这样查找的时候就可以不用从头插到尾要O(n)，这样可以缩短到O(log)级别甚至O(1)。
- 建立索引之后**查找和修改，排序等操作可以省很多时间。**
- 索引是对数据库表中一个或多个列（例如，employee 表的姓名 (name) 列）的值进行排序的结构。如果**想按特定职员的姓来查找他或她，则与在表中搜索所有的行相比，索引有助于更快地获取信息。**
- 例如这样一个查询：select * from table1 where id=10000。如果没有索引，必须遍历整个表，直到ID等于10000的这一行被找到为止；有了索引之后(必须是在ID这一列上建立的索引)，即可在索引中查找。由于索引是经过某种算法优化过的，因而查找次数要少的多。可见，**索引是用来定位的。**
- 数据库索引好比是一本书前面的目录，能加快数据库的查询速度。

### 聚簇索引与非聚簇索引

- 索引分为聚簇索引和非聚簇索引两种，聚簇索引 是按照数据存放的物理位置为顺序的，就像书中的目录，内容是按照页码顺序排列的，而非聚簇索引就不一样了；**聚簇索引能提高多行检索的速度，而非聚簇索引对于单行的检索很快。**
- 注意一个表只能有一个聚集索引，但是可以由多个非聚集索引。

### 唯一索引 主键索引 聚集索引

- 接下来说以下三种不同的索引： 根据**数据库的功能**，可以在数据库设计器中创建三种索引：**唯一索引、主键索引和聚集索引。** 提示：尽管唯一索引有助于定位信息，但**为获得最佳性能结果，建议改用主键或唯一约束。**
- 唯一索引 **唯一索引是不允许其中任何两行具有相同索引值的索引。**不是只能建一个索引。 当现有数据中存在重复的键值时，大多数数据库**不允许将新创建的唯一索引与表一起保存。数据库还可能防止添加将在表中创建重复键值的新数据**。例如，如果在employee表中职员的姓(lname)上创建了唯一索引，则任何两个员工都不能同姓。
- 主键索引 数据库表**经常有一列或多列组合，其值唯一标识表中的每一行。该列称为表的主键。在数据库关系图中为表定义主键将自动创建主键索引，主键索引是唯一索引的特定类型**。该索引要求主键中的每个值都唯一。当在查询中使用主键索引时，它还允许对数据的快速访问。
- 聚集索引 在聚集索引中，表中**行的物理顺序与键值的逻辑（索引）顺序相同**。**一个表只能包含一个聚集索引。如果某索引不是聚集索引，则表中行的物理顺序与键值的逻辑顺序不匹配**。与非聚集索引相比，聚集索引通常提供更快的数据访问速度。
- 索引列 可以**基于数据库表中的单列或多列创建索引。多列索引可以区分其中一列可能有相同值的行。**
- 如果经常同时**搜索两列或多列或按两列或多列排序时，索引也很有帮助。例如，如果经常在同一查询中为姓和名两列设置判据，那么在这两列上创建多列索引将很有意义。**

### 索引建立语法

接下来说一下在数据库中建立索引的语法：

- （1）可以用create index创建

  ```mysql
   create [unique | CLUSTERED | UNCLUSTERED ] index 索引名 [索引类型] on 表名（列名（n） [asc|desc ]，列名，列名...）；
  ```

   索引名命名最好用tablename_ColName1_ColName2 索引类型可以指定为BTREE或者HASH等 n代表列中的几位做索引，可以省空间 asc desc 升序降序。

- （2）可以在alter table 语句创建

   ```mysql
  alter table 表名 add [UNIQUE|FULLTEXT] index 索引名 [using [BTREE|HASH]] (列名)； 
   ```

  例如,

  ```mysql
  alter table xs add index xs_sm using btree(姓名);
  alter table xs add index mark(出生日期，姓名)
  ```

  （3）可以在create table时创建

  ```mysql
  create table 表名{
  学号 char（6）,
  课程号 char(3),
  成绩 tinyint(1),
  学分 tinyint(1),
  primary key(学号，课程号);
  index cj(成绩)			//index 索引名 [索引类型] (索引列名)
  }
  ```

  ​

### 删除索引的方法：

```mysql
（1） DROP INDEX 索引名 ON 表名
（2） ALTER TABLE 表名 DROP INDEX 索引名
```



### 查看一个表的索引：

```mysql
show index in 表名
```



