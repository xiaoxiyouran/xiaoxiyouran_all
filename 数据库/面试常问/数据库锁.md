# 数据库锁

```mysql
1-按锁的内容分为三类：
	InnoDB: 行锁
	MyIsam: 表锁
	BerkeleyDBA: 页锁
	
2- 锁的性质分为三类：
	共享锁(读锁/ S 锁) ： select, 读时共享
	独占锁(写锁/ X 锁/ 排他锁)： insert,update,delete 时，更新用
	更新锁(意向锁/ U 锁) ： 事务在表级请求共享意向锁。这样可以防止其他事务随后在表上获取排他锁（X锁），修改整个表格。意向锁可以提高性能，因为数据库引擎仅在表级检查意向锁，确定事务是否能安全地获取该表上的锁，而不需要检查表中的每行或每页上的锁以确定事务是否可以锁定整个表。
```



数据库中的锁：

锁的种类：

按照锁的内容上分为：表锁，页锁，行锁。**InnoDB支持行锁，MyIsam支持表锁，BerkeleyDBA支持页锁。不同的粒度**

按照锁的性质分可以分为：**共享锁（读锁或S锁）,独占锁（写锁，排它锁）（X锁），更新锁（U锁）（意向锁）**

当执行select时候，加共享锁，当insert update delete等操作时，加排它锁。更新锁首先对数据对象作更新锁锁定，这样数据将不能被修改，但可以读取。等到SQL Server确定要进行更新数据操作时，他会自动将更新锁换为独占锁，当对象上有其他锁存在时，无法对其加更新锁。

意向锁是为了提高**封锁子系统的效率**。该封锁子系统**支持多种封锁粒度**。原因是:**在多粒度封锁方法中一个数据对象可能以两种方式加锁 ― 显式封锁和隐式封锁。**

数据库引擎使用意向锁来保护锁层次结构的底层资源，以防止其他事务对自己锁住的资源造成伤害，提高锁冲突检测性能。例如，当读取表里的页面时，在请求页共享锁（S锁）之前，事务在表级请求共享意向锁。这样可以防止其他事务随后在表上获取排他锁（X锁），修改整个表格。**意向锁可以提高性能，因为数据库引擎仅在表级检查意向锁，确定事务是否能安全地获取该表上的锁，而不需要检查表中的每行或每页上的锁以确定事务是否可以锁定整个表。**